# docker-stack-nexus

This GIT repository deploys a single node Sonatype Nexus repository. Configuration is tailored to a lab environment with fixed/ static storage.

## Prerequisites

1. A docker label "nexus=1" is applied to a node in the swarm. This is to pin the Nexus container to that host and always use the same storage.

## Configuration

Make a copy of ```./configs/base.env.template```
Make required changes to the new copied file.

## Deployment
1. Source/ export environment variables inside file from "Configuration" stage.
Automated:
2a1. Run ```./01-setup```
Manual
2m1. Run ```docker stack rm ${NAME}
2m2. Wait up to 30 seconds (not required if no stack was cleaned from step 2m1.
2m3. Run ```docker stack deploy -c docker-compose.yml ${NAME}

There is a simple removal and deployment script ```01-setup```. This contains the required commands to remove and stand up the Nexus Docker Stack.

## First Time
If this is the first time this has been deployed, there will be an initial password generated by the container, to obtain that, run:
```bash
$ ./tools/get-admin-password.sh
```
